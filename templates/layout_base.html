<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>{% block title %}TeamSync{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --bg: linear-gradient(180deg, #f5f7fb 0%, #ecf0fd 100%);
      --panel: rgba(255,255,255,0.12);
      --glass-border: rgba(255,255,255,0.18);
      --text: #021023;
      --muted: rgba(2,16,35,0.55);
      --accent: #06b6d4;
      --glass-blur: 20px;
      --shadow: 0 20px 40px rgba(2,6,23,0.12);
    }
    [data-theme="dark"]{
      --bg: linear-gradient(180deg, #060a11 0%, #0a121c 100%);
      --panel: rgba(255,255,255,0.05);
      --glass-border: rgba(255,255,255,0.10);
      --text: #e6eef6;
      --muted: rgba(230,238,246,0.60);
      --accent: #58a6ff; /* Github blue */
      --glass-blur: 22px;
      --shadow: 0 30px 60px rgba(0,0,0,0.40);
    }

    body { background: var(--bg); color: var(--text); font-family: Inter, sans-serif; }

    .glass{
      background: var(--panel);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(var(--glass-blur));
      box-shadow: var(--shadow);
      border-radius: 14px;
    }

    .sidebar a{
      display:flex; gap:12px; align-items:center;
      padding:10px 12px; border-radius:10px;
      text-decoration:none; color:var(--text);
    }
    .sidebar a:hover{
      transform: translateX(6px);
      transition:0.16s;
      background: rgba(255,255,255,0.05);
    }

    .muted { color: var(--muted); }
    .accent { color: var(--accent); }

    /* Fix: flex sidebar structure */
    .sidebar-container {
      width: 240px;
      flex-shrink: 0;
    }


    /* --- BORDERLESS GLASS ENHANCEMENTS --- */
.neo-card {
    border: none !important;
}

.neo-inset {
    border: none !important;
}

/* Soft hover lift */
.hover-soft {
    transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.hover-soft:hover {
    transform: translateY(-3px);
    box-shadow:
      10px 10px 20px var(--shadow-dark),
     -10px -10px 20px var(--shadow-light);
}



    @media (max-width:900px){
      .sidebar-container { display:none; }
      .mobile-menu-btn { display:block; }
    }

    .mobile-menu-btn { display:none; }
  </style>
</head>

<body data-theme="light">
  <div class="min-h-screen flex">

    <!-- Sidebar injected here -->
    <div class="sidebar-container">
      {% block sidebar %}{% endblock %}
    </div>

    <!-- MAIN CONTENT -->
    <div class="flex-1 p-6 lg:p-8">

      <div class="flex items-center justify-between mb-6">
        <div>
          <h1 class="text-2xl font-bold">{% block page_title %}TeamSync{% endblock %}</h1>
          <p class="muted text-sm">{% block page_subtitle %}{% endblock %}</p>
        </div>

        <div class="flex items-center gap-3">

          <!-- Theme Toggle -->
          <button id="themeToggle" class="glass px-3 py-2 rounded-lg text-sm flex items-center gap-2">
            <span id="themeIcon">ðŸŒž</span>
          </button>

          <!-- Username -->
          {% if user %}
          <div class="glass px-3 py-2 rounded-lg text-sm muted">
            {{ user.name }}
          </div>
          {% endif %}

          <a href="/logout" class="glass px-3 py-2 rounded-lg text-sm text-red-400">Logout</a>
        </div>
      </div>

      <!-- PAGE CONTENT -->
      <div>{% block content %}{% endblock %}</div>

      <footer class="mt-10 text-sm muted">
        Â© {{ current_year }} TeamSync
      </footer>

    </div>
  </div>

<script>
  // theme switch
  const body = document.body;
  const toggle = document.getElementById("themeToggle");

  function applyTheme(t){
    body.setAttribute("data-theme", t);
    document.getElementById("themeIcon").innerHTML = t === "dark" ? "ðŸŒ™" : "ðŸŒž";
  }

  let saved = localStorage.getItem("ts-theme") || "light";
  applyTheme(saved);

  toggle.addEventListener("click", () => {
    saved = saved === "dark" ? "light" : "dark";
    localStorage.setItem("ts-theme", saved);
    applyTheme(saved);
  });
</script>

</body>
</html>
