{% extends "layout_base.html" %}
{% block sidebar %}{% include "sidebar_admin.html" %}{% endblock %}
{% block page_title %}Unknown RFID Alerts{% endblock %}

{% block content %}
<div class="space-y-5">

  <!-- Search Filter -->
  <form method="get" action="/admin/unknown_rfid"
        class="glass p-4 rounded-lg flex gap-3">
    <input name="search" placeholder="Search tag or location"
           value="{{ search or '' }}"
           class="flex-1 p-2 rounded border" />
    <button class="bg-red-500 text-white rounded px-4">Search</button>
  </form>

  <!-- Unknown RFID List -->
  <div class="glass p-4 rounded-lg overflow-x-auto">
    <table class="w-full text-sm text-left">
      <thead class="border-b font-semibold">
        <tr>
          <th class="p-2">RFID Tag</th>
          <th class="p-2">Location</th>
          <th class="p-2">Timestamp</th>
          <th class="p-2"></th>
        </tr>
      </thead>

      <tbody>
      {% if unknown_rfids %}
        {% for r in unknown_rfids %}
        <tr class="border-b hover:bg-gray-100/20">
          <td class="p-2 font-semibold text-red-400">{{ r.rfid_tag }}</td>
          <td class="p-2">{{ r.location }}</td>
          <td class="p-2">
            {{ r.timestamp.strftime("%d-%m-%Y %H:%M:%S") }}
          </td>
          <td class="p-2">
            <form method="post" action="/admin/resolve_rfid"
                  class="inline-block"
                  onsubmit="return confirm('Mark as resolved?')">
              <input type="hidden" name="rfid_tag" value="{{ r.rfid_tag }}">
              <button class="bg-green-500 text-white px-3 py-1 rounded">
                Resolve
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      {% else %}
        <tr>
          <td colspan="4" class="text-center py-4 text-gray-400 italic">
            ðŸŽ‰ No unknown RFIDs currently!
          </td>
        </tr>
      {% endif %}
      </tbody>

    </table>
  </div>

</div>
{% endblock %}
