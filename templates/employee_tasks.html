{% extends "layout_base.html" %}
{% block title %}Tasks — TeamSync{% endblock %}
{% block sidebar %}{% include "sidebar_employee.html" %}{% endblock %}
{% block page_title %}Tasks{% endblock %}
{% block content %}
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
  <div class="glass p-4">
    <h4 class="font-semibold mb-3">Add Task</h4>
    <form method="post" action="/employee/tasks/add" class="space-y-3">
      <input name="title" placeholder="Title" class="w-full p-3 rounded border border-white/10 bg-transparent" required>
      <textarea name="description" placeholder="Description" class="w-full p-3 rounded border border-white/10 bg-transparent"></textarea>
      <button class="w-full py-3 rounded font-semibold" style="background:linear-gradient(90deg,#06b6d4,#0ea5a4); color:#022;">Add Task</button>
    </form>
  </div>

  <div class="glass p-4 space-y-3">
    <h4 class="font-semibold">My Tasks</h4>
    {% for t in tasks %}
    <div class="p-3 glass rounded">
      <div class="flex justify-between items-start">
        <div>
          <div class="font-medium">{{ t.title }}</div>
          <div class="muted text-sm mt-1">{{ t.description }}</div>
        </div>
        <div class="text-sm muted">{{ t.status }}</div>
      </div>
      <div class="mt-3 flex gap-2">
        <form method="post" action="/employee/tasks/update">
          <input type="hidden" name="task_id" value="{{ t.id }}">
          <input type="hidden" name="status" value="completed">
          <button class="text-sm px-3 py-1 rounded btn-done">Mark Done</button>
        </form>

        <form method="post" action="/employee/tasks/update">
          <input type="hidden" name="task_id" value="{{ t.id }}">
          <input type="hidden" name="status" value="pending">
          <button class="text-sm px-3 py-1 rounded btn-pending">Pending</button>
        </form>
      </div>
    </div>
    {% else %}
      <div class="muted">No tasks yet — add one on the left.</div>
    {% endfor %}
  </div>
</div>
{% endblock %}
