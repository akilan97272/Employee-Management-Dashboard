{% extends "layout_base.html" %}
{% block sidebar %}{% include "sidebar_employee.html" %}{% endblock %}
{% block page_title %}Payslips{% endblock %}

{% block content %}

<div class="glass p-8 rounded-xl space-y-6 max-w-3xl mx-auto">

    <form method="GET" action="/employee/payslips" class="flex gap-4">

        <select name="month" class="glass px-3 py-2 rounded">
            {% for i in range(1,13) %}
            <option value="{{ i }}" {% if i == month %}selected{% endif %}>
                {{ i }}
            </option>
            {% endfor %}
        </select>

        <select name="year" class="glass px-3 py-2 rounded">
            {% for y in range(current_year-5, current_year+1) %}
            <option value="{{ y }}" {% if y == year %}selected{% endif %}>
                {{ y }}
            </option>
            {% endfor %}
        </select>

        <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow">
            View Payslip
        </button>

    </form>

    {% if computed %}
    <div class="bg-white/70 p-6 rounded-xl shadow space-y-4">

        <div class="flex justify-between"><span class="text-gray-600">Employee:</span><span>{{ user.name }}</span></div>
        <div class="flex justify-between"><span class="text-gray-600">Emp ID:</span><span>{{ user.employee_id }}</span></div>

        <hr>

        <div class="flex justify-between"><span>Month:</span><span>{{ month }}/{{ year }}</span></div>
        <div class="flex justify-between"><span>Total Hours:</span><span class="text-blue-700">{{ total_hours }} hrs</span></div>

        <div class="flex justify-between font-semibold text-lg">
            <span>Gross Salary:</span><span>₹{{ gross_salary }}</span>
        </div>

        <div class="flex justify-between text-red-600">
            <span>Leave Deductions:</span><span>- ₹{{ leave_deduction }}</span>
        </div>

        <div class="flex justify-between text-yellow-600">
            <span>Tax Deduction (10%):</span><span>- ₹{{ tax_deduction }}</span>
        </div>

        <hr>

        <div class="flex justify-between text-xl font-bold">
            <span>Net Salary:</span><span class="text-green-600">₹{{ net_salary }}</span>
        </div>

        <div class="text-center">
            <a href="/employee/payslips/download?month={{ month }}&year={{ year }}"
               class="bg-blue-600 text-white px-6 py-2 rounded shadow hover:bg-blue-700">
                Download PDF
            </a>
        </div>

    </div>
    {% endif %}

</div>

{% endblock %}
